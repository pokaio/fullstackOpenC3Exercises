{"version":3,"sources":["services/persons.js","App2.19-2.20.js","index.js"],"names":["services_persons","axios","get","then","response","data","newObject","post","id","delete","concat","put","Filter","_ref","value","onChange","react_default","a","createElement","DisplayPersons","_ref2","filterName","filtered","persons","filter","el","name","toLowerCase","includes","length","map","key","number","Notification","_ref3","person","style","color","border","borderRadius","backgroundColor","padding","AddPerson","_ref4","onSubmit","numberChange","typeNumber","type","DisplayNumbers","_ref5","deleteButton","onClick","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setFilterName","_useState5","_useState6","notification","setNotification","useEffect","personsService","initialperson","console","log","App2_19_2_20_Notification","App2_19_2_20_Filter","event","target","App2_19_2_20_DisplayPersons","App2_19_2_20_AddPerson","newName","newNumber","preventDefault","personsObject","window","confirm","entry","changedNumber","objectSpread","updated","catch","error","message","setTimeout","alert","returnedPersons","App2_19_2_20_DisplayNumbers","targetId","targetInd","indexOf","splice","ReactDOM","createRoot","document","getElementById","render","App2_19_2_20"],"mappings":"qOA+BeA,EArBA,WAEX,OADgBC,IAAMC,IAJV,YAKGC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAmB9BL,EAhBA,SAAAM,GAEX,OADgBL,IAAMM,KATV,WASwBD,GACrBH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAc9BL,EAXM,SAACQ,GAElB,OADgBP,IAAMQ,OAAN,GAAAC,OAdJ,YAcIA,OAA0BF,IAC3BL,KAAK,SAAAC,GAAQ,OAAIA,KASrBJ,EALA,SAACQ,EAAIF,GAEhB,OADgBL,IAAMU,IAAN,GAAAD,OApBJ,YAoBIA,OAAuBF,GAAMF,GAC9BH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCdvCO,EAAS,SAAAC,GAAyB,IAAtBC,EAAsBD,EAAtBC,MAAOC,EAAeF,EAAfE,SACrB,OACIC,EAAAC,EAAAC,cAAA,4BACiBF,EAAAC,EAAAC,cAAA,SAAOJ,MAAOA,EAAOC,SAAUA,MAKlDI,EAAiB,SAAAC,GAA6B,IAA1BC,EAA0BD,EAA1BC,WAChBC,EAD0CF,EAAdG,QACTC,OAAO,SAAAC,GAAE,OAAIA,EAAGC,KAAKC,cAAcC,SAASP,EAAWM,iBAEhF,OAA0B,IAAtBN,EAAWQ,OAEPb,EAAAC,EAAAC,cAAA,YAIAF,EAAAC,EAAAC,cAAA,WACKI,EAASQ,IAAI,SAAAL,GACV,OACIT,EAAAC,EAAAC,cAAA,KAAGa,IAAKN,EAAGjB,IAAKiB,EAAGC,KAAnB,KAA2BD,EAAGO,YAQhDC,EAAe,SAAAC,GAAgB,IAAbC,EAAaD,EAAbC,OASpB,MAAe,KAAXA,EAEInB,EAAAC,EAAAC,cAAA,YAIJF,EAAAC,EAAAC,cAAA,KAAGkB,MAdmB,CACtBC,MAAO,QACPC,OAAQ,QACRC,aAAc,EACdC,gBAAiB,YACjBC,QAAS,KASqBN,IAIhCO,EAAY,SAAAC,GAA6D,IAA1D7B,EAA0D6B,EAA1D7B,MAAOC,EAAmD4B,EAAnD5B,SAAU6B,EAAyCD,EAAzCC,SAAUC,EAA+BF,EAA/BE,aAAcC,EAAiBH,EAAjBG,WAC1D,OACI9B,EAAAC,EAAAC,cAAA,QAAM0B,SAAUA,GACZ5B,EAAAC,EAAAC,cAAA,oBACUF,EAAAC,EAAAC,cAAA,SAAOJ,MAAOA,EAAOC,SAAUA,KAEzCC,EAAAC,EAAAC,cAAA,sBACYF,EAAAC,EAAAC,cAAA,SAAO6B,KAAK,SAASjC,MAAOgC,EAAY/B,SAAU8B,KAE9D7B,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,UAAQ6B,KAAK,UAAb,UAMVC,EAAiB,SAAAC,GAA+B,IAA5B1B,EAA4B0B,EAA5B1B,QAAS2B,EAAmBD,EAAnBC,aAC/B,OACIlC,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,qBACCK,EAAQO,IAAI,SAAAL,GACT,OACIT,EAAAC,EAAAC,cAAA,KAAGa,IAAKN,EAAGjB,IAAKiB,EAAGC,KAAnB,KAA2BD,EAAGO,OAA9B,IAAsChB,EAAAC,EAAAC,cAAA,UAAQQ,KAAMD,EAAGC,KAAMlB,GAAIiB,EAAGjB,GAAI2C,QAASD,GAA3C,eAsH3CE,EA/GH,WAAM,IAAAC,EACgBC,mBAAS,IADzBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACP9B,EADOgC,EAAA,GACEG,EADFH,EAAA,GAAAI,EAEsBL,mBAAS,IAF/BM,EAAAJ,OAAAC,EAAA,EAAAD,CAAAG,EAAA,GAEPtC,EAFOuC,EAAA,GAEKC,EAFLD,EAAA,GAAAE,EAG0BR,mBAAS,IAHnCS,EAAAP,OAAAC,EAAA,EAAAD,CAAAM,EAAA,GAGPE,EAHOD,EAAA,GAGOE,EAHPF,EAAA,GAKdG,oBAAU,WACNC,IAEKhE,KAAK,SAAAiE,GACFC,QAAQC,IAAI,sBACZZ,EAAWU,MAEpB,IAqFH,OACIpD,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAACqD,EAAD,CAAcpC,OAAQ6B,IACtBhD,EAAAC,EAAAC,cAACsD,EAAD,CAAQ1D,MAAOO,EAAYN,SA1BR,SAAC0D,GACxBZ,EAAcY,EAAMC,OAAO5D,UA0BvBE,EAAAC,EAAAC,cAACyD,EAAD,CAAgBtD,WAAYA,EAAYE,QAASA,IACjDP,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAC0D,EAAD,CAAWhC,SA1FH,SAAC6B,GACb,IAAMI,EAAUJ,EAAMC,OAAO,GAAG5D,MAC1BgE,EAAYL,EAAMC,OAAO,GAAG5D,MAElC2D,EAAMM,iBAGN,IAAMC,EAAgB,CAClBtD,KAAMmD,EACN7C,OAAQ8C,GAKZ,GAAIvD,EAAQO,IAAI,SAAAL,GAAE,OAAIA,EAAGC,KAAKC,gBAAeC,SAASiD,EAAQlD,gBAC1D,GAAIsD,OAAOC,QAAP,IAAAxE,OAAmBmE,EAAnB,0EAAoG,CAEpG,IAAMM,EAAQ5D,EAAQC,OAAO,SAAAC,GAAE,OAAIA,EAAGC,KAAKC,cAAcC,SAASiD,EAAQlD,iBACpEyD,EAAa5B,OAAA6B,EAAA,EAAA7B,CAAA,GAAQ2B,EAAM,GAAd,CAAkBnD,OAAM,GAAAtB,OAAKoE,KAIhDX,EACYiB,EAAc5E,GAAI4E,GACzBjF,KAAK,SAAAC,GACF,IAAMkF,EAAU/D,EAAQO,IAAI,SAAAL,GAAE,OAAIA,EAAGjB,KAAOJ,EAASI,GAAKiB,EAAKrB,IAC/DsD,EAAW4B,EAAQxD,IAAI,SAAAL,GAAE,OAAIA,OAEhC8D,MAAM,SAAAC,GACHnB,QAAQC,IAAIkB,EAAMC,SAClBpB,QAAQC,IAAIkB,EAAMpF,SAASC,KAAKmF,OAChCvB,EAAgBY,EAAU,8BAC1BnB,EAAWnC,EAAQC,OAAO,SAAAC,GAAE,OAAIA,EAAGjB,KAAO2E,EAAM,GAAG3E,MACnDkF,WAAW,WACPzB,EAAgB,KACjB,OAGXQ,EAAMC,OAAO,GAAG5D,MAAQ,GACxB2D,EAAMC,OAAO,GAAG5D,MAAQ,QAGT,KAAZ+D,GAAgC,KAAdC,EACzBa,MAAM,8BAENxB,EACYa,GACP7E,KAAK,SAAAyF,GACFvB,QAAQC,IAAI,UACZZ,EAAWnC,EAAQb,OAAOkF,IAC1BnB,EAAMC,OAAO,GAAG5D,MAAQ,GACxB2D,EAAMC,OAAO,GAAG5D,MAAQ,GAExBmD,EAAgBY,EAAU,oBAC1Ba,WAAW,WACPzB,EAAgB,KACjB,UAmCXjD,EAAAC,EAAAC,cAAC2E,EAAD,CAAgBtE,QAASA,EAAS2B,aA1BrB,SAACuB,GACdQ,OAAOC,QAAP,WAAAxE,OAA0B+D,EAAMC,OAAOhD,KAAvC,QACAyC,EACkBM,EAAMC,OAAOlE,IAC1BL,KAAK,WACFkE,QAAQC,IAAI,WAGZ,IAAMwB,EAAWrB,EAAMC,OAAOlE,GAExBuF,EAAYxE,EAAQO,IAAI,SAAAL,GAAE,OAAIA,EAAGjB,KAAIwF,QAAQF,GAEnDvE,EAAQ0E,OAAOF,EAAW,GAC1BrC,EAAWnC,EAAQO,IAAI,SAAAL,GAAE,OAAIA,YC7KjDyE,IAASC,WAAWC,SAASC,eAAe,SAASC,OACnDtF,EAAAC,EAAAC,cAACqF,EAAD","file":"static/js/main.c9075c2a.chunk.js","sourcesContent":["import axios from 'axios'\r\n//const baseUrl = '/persons/'\r\n\r\n//For build\r\n//const baseUrl = 'api/persons/'\r\n\r\n//For front end debugging\r\nconst baseUrl = 'persons/'\r\n//const baseUrl = 'http://localhost:3001/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteNumber = (id) => {\r\n    const request = axios.delete(`${baseUrl}${id}`)\r\n    return request.then(response => response)\r\n    \r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, deleteNumber, update }","//Exercises 2.19.2.20 part 2d\r\n//Phonebook Continuation\r\n\r\n\r\n//Edited for Chapter 3\r\n\r\n//Other files services/persons.js -> module handling the communication with the backend.\r\n//TODO: refactor 2.18\r\n\r\n//import axios from 'axios'\r\nimport React, { useState, useEffect } from 'react'\r\nimport personsService from './services/persons'\r\n\r\n//Components\r\nconst Filter = ({ value, onChange }) => {\r\n    return (\r\n        <form>\r\n            Find person: <input value={value} onChange={onChange} />\r\n        </form>\r\n    )\r\n}\r\n\r\nconst DisplayPersons = ({ filterName, persons }) => {\r\n    const filtered = persons.filter(el => el.name.toLowerCase().includes(filterName.toLowerCase()))\r\n\r\n    if (filterName.length === 0) {\r\n        return (\r\n            <div></div>\r\n        )\r\n    } else {\r\n        return (\r\n            <div>\r\n                {filtered.map(el => {\r\n                    return (\r\n                        <p key={el.id}>{el.name}: {el.number}</p>\r\n                    )\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst Notification = ({ person }) => {\r\n    const notificationStyle = {\r\n        color: 'green',\r\n        border: 'solid',\r\n        borderRadius: 8,\r\n        backgroundColor: 'lightgrey',\r\n        padding: 12\r\n    }\r\n\r\n    if (person === '') {\r\n        return (\r\n            <div></div>\r\n        )\r\n    }\r\n    return (\r\n        <p style={notificationStyle}>{person}</p>\r\n    )\r\n}\r\n\r\nconst AddPerson = ({ value, onChange, onSubmit, numberChange, typeNumber }) => {\r\n    return (\r\n        <form onSubmit={onSubmit}>\r\n            <div>\r\n                Name: <input value={value} onChange={onChange} />\r\n            </div>\r\n            <div>\r\n                Number: <input type=\"number\" value={typeNumber} onChange={numberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">Add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst DisplayNumbers = ({ persons, deleteButton }) => {\r\n    return (\r\n        <div>\r\n            <h2>Numbers</h2>\r\n            {persons.map(el => {\r\n                return (\r\n                    <p key={el.id}>{el.name}: {el.number} <button name={el.name} id={el.id} onClick={deleteButton}>Delete</button></p>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [filterName, setFilterName] = useState('')\r\n    const [notification, setNotification] = useState('')\r\n\r\n    useEffect(() => {\r\n        personsService\r\n            .getAll()\r\n            .then(initialperson => {\r\n                console.log('server data loaded')\r\n                setPersons(initialperson)\r\n            })\r\n    }, [])\r\n\r\n    const addName = (event) => {\r\n        const newName = event.target[0].value\r\n        const newNumber = event.target[1].value\r\n\r\n        event.preventDefault()\r\n\r\n        //Creates a new nameObject that we can add to *persons*\r\n        const personsObject = {\r\n            name: newName,\r\n            number: newNumber,\r\n            //id: persons.length + 1\r\n        }\r\n\r\n        //Checks if the name exists in database\r\n        if (persons.map(el => el.name.toLowerCase()).includes(newName.toLowerCase())) {\r\n            if (window.confirm(`'${newName}' aldready added to phonebook, replace the old number with a new one?`)) {\r\n                //Index of entry\r\n                const entry = persons.filter(el => el.name.toLowerCase().includes(newName.toLowerCase()))\r\n                const changedNumber = { ...entry[0], number: `${newNumber}` }\r\n\r\n                /* axios\r\n                    .put(`http://localhost:3001/persons/${entry[0].id}`, changedNumber) */\r\n                personsService\r\n                    .update(changedNumber.id, changedNumber)\r\n                    .then(response => {\r\n                        const updated = persons.map(el => el.id !== response.id ? el : response)\r\n                        setPersons(updated.map(el => el))\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error.message)\r\n                        console.log(error.response.data.error)\r\n                        setNotification(newName + ' has already been deleted.')\r\n                        setPersons(persons.filter(el => el.id !== entry[0].id))\r\n                        setTimeout(() => {\r\n                            setNotification('')\r\n                        }, 3000)\r\n                    })\r\n\r\n                event.target[0].value = ''\r\n                event.target[1].value = ''\r\n            }\r\n\r\n        } else if (newName === '' || newNumber === '') {\r\n            alert('Name or number is missing.')\r\n        } else {\r\n            personsService\r\n                .create(personsObject)\r\n                .then(returnedPersons => {\r\n                    console.log('posted')\r\n                    setPersons(persons.concat(returnedPersons))\r\n                    event.target[0].value = ''\r\n                    event.target[1].value = ''\r\n\r\n                    setNotification(newName + ' has been added.')\r\n                    setTimeout(() => {\r\n                        setNotification('')\r\n                    }, 3000)\r\n                })\r\n        }\r\n    }\r\n\r\n    const handleFilterChange = (event) => {\r\n        setFilterName(event.target.value)\r\n    }\r\n\r\n    const toggleDelete = (event) => {\r\n        if (window.confirm(`Delete '${event.target.name}'?`)) {\r\n            personsService\r\n                .deleteNumber(event.target.id)\r\n                .then(() => {\r\n                    console.log(\"deleted\")\r\n\r\n                    //Button id\r\n                    const targetId = event.target.id\r\n                    //The index of the button-id in the array\r\n                    const targetInd = persons.map(el => el.id).indexOf(targetId)\r\n                    //Remove it from array\r\n                    persons.splice(targetInd, 1)\r\n                    setPersons(persons.map(el => el))\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification person={notification} />\r\n            <Filter value={filterName} onChange={handleFilterChange} />\r\n            <DisplayPersons filterName={filterName} persons={persons} />\r\n            <h2>Add a new number</h2>\r\n            <AddPerson onSubmit={addName} />\r\n            <DisplayNumbers persons={persons} deleteButton={toggleDelete} />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\n\r\nimport './index.css'\r\n\r\nimport App from './App2.19-2.20'\r\n\r\n\r\n\r\nReactDOM.createRoot(document.getElementById('root')).render(\r\n  <App />\r\n)"],"sourceRoot":""}